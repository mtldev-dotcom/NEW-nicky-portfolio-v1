# Chatbot Integration (n8n)

## UI/UX
- Docked bubble (bottom-right) → glass panel with mint outline and header “Ask Nicky’s AI”.
- Input supports multiline with `Enter` to send (Shift+Enter for newline).
- Show typing indicator and streamed responses; preserve history in local storage (per locale).

## Architecture
- Do **not** hardcode webhook URL in client code. Use a Next.js server route (`/api/chat`) that reads env (`N8N_WEBHOOK_URL`) and forwards requests securely.
- Rate-limit the API route and validate payload.

**Server route example (sketch)**
```ts
// app/api/chat/route.ts
import { NextRequest, NextResponse } from 'next/server'

export async function POST(req: NextRequest) {
  const body = await req.json()
  const r = await fetch(process.env.N8N_WEBHOOK_URL!, {
    method: 'POST',
    headers: { 'content-type': 'application/json' },
    body: JSON.stringify(body),
  })
  return new NextResponse(r.body, { status: r.status })
}
```

## i18n
- Title, placeholder, quick suggestions from `messages/*/chatbot.json`.
- Locale carried in request to allow language-aware responses.

## Don’ts
- Don’t expose secrets to the client.
- Don’t block the UI during long inferences; provide cancellable requests.
